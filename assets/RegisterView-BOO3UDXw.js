import{r as u,e as V,c as p,a as l,w as i,b as y,v as r,t as a,F as b,o as m}from"./index-0_7FYHN0.js";import{a as v}from"./index-ngrFHoWO.js";const U={key:0},T={key:1},c="https://todolist-api.hexschool.io",D={__name:"RegisterView",setup($){const t=u({email:"",password:"",nickname:""}),k=u(""),w=async()=>{try{const o=await v.post(`${c}/users/sign_up`,t.value);console.log(o),k.value=o.data.uid}catch(o){console.log(o)}},s=u({email:"",password:""}),g=u(""),x=async()=>{try{const o=await v.post(`${c}/users/sign_in`,s.value);console.log(o),g.value=o.data.token,document.cookie=`customTodoToken=${o.data.token};path=/`}catch(o){console.log(o)}},d=u({uid:"",nickname:""});return V(async()=>{const o=document.cookie.replace(/(?:^|.*;\s*)customTodoToken\s*=\s*([^;]*).*$/i,"$1");console.log(o);const e=await v.get(`${c}/users/checkout`,{headers:{Authorization:o}});console.log(e),d.value=e.data}),(o,e)=>(m(),p(b,null,[l("div",null,[e[5]||(e[5]=l("h2",null,"註冊",-1)),i(l("input",{type:"email",placeholder:"email","onUpdate:modelValue":e[0]||(e[0]=n=>t.value.email=n)},null,512),[[r,t.value.email]]),i(l("input",{type:"text",placeholder:"password","onUpdate:modelValue":e[1]||(e[1]=n=>t.value.password=n)},null,512),[[r,t.value.password]]),i(l("input",{type:"text",placeholder:"nickname","onUpdate:modelValue":e[2]||(e[2]=n=>t.value.nickname=n)},null,512),[[r,t.value.nickname]]),l("button",{type:"button",onClick:w},"註冊"),e[6]||(e[6]=l("br",null,null,-1)),y(" "+a(t.value)+" UID:"+a(k.value),1)]),l("div",null,[e[7]||(e[7]=l("h2",null,"登入",-1)),i(l("input",{type:"email",placeholder:"email","onUpdate:modelValue":e[3]||(e[3]=n=>s.value.email=n)},null,512),[[r,s.value.email]]),i(l("input",{type:"text",placeholder:"password","onUpdate:modelValue":e[4]||(e[4]=n=>s.value.password=n)},null,512),[[r,s.value.password]]),l("button",{type:"button",onClick:x},"登入"),e[8]||(e[8]=l("br",null,null,-1)),y(" "+a(s.value)+" token: "+a(g.value),1)]),l("div",null,[e[9]||(e[9]=l("h2",null,"驗證",-1)),d.value.uid?(m(),p("div",U,[l("p",null,"UID: "+a(d.value.uid),1),l("p",null,"Nickname: "+a(d.value.nickname),1)])):(m(),p("div",T,"你還沒有登入"))])],64))}};export{D as default};
